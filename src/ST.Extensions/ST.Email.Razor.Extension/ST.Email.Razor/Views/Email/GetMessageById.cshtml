@using ST.Identity.Abstractions
@using ST.Identity.Data.UserProfiles
@model ST.Core.Helpers.ResultModel<ST.Entities.Abstractions.ViewModels.DynamicEntities.EntityViewModel>
@inject UserManager<ApplicationUser> UserManager

@{
	ViewData["Title"] = "Message";
	var from = UserManager.Users.FirstOrDefault(x => x.Id == (string)Model.Result.Values[0]["Author"]);
}


<div class="card b-all shadow-none">
	<div class="card-block">
		<h3 class="card-title m-b-0">@Model.Result.Values[0]["Subject"]</h3>
	</div>
	<div>
		<hr class="m-t-0">
	</div>
	<div class="card-block">
		<div class="d-flex m-b-40">
			<div>
				<a href="javascript:void(0)"><img src="/users/getimage?id=@from?.Id" alt="user" width="40" class="img-circle" /></a>
			</div>
			<div class="p-l-10">
				<h4 class="m-b-0">@from?.UserName</h4>
				<small class="text-muted">From: @from?.Email</small>
			</div>
		</div>
		<p>
			@Model.Result.Values[0]["Message"]
		</p>
	</div>
	<div>
		<hr class="m-t-0">
	</div>
	@*<div class="card-block">
			<h4><i class="fa fa-paperclip m-r-10 m-b-10"></i> Attachments <span>(3)</span></h4>
			<div class="row">
				<div class="col-md-2">
					<a href="#"> <img class="img-thumbnail img-responsive" alt="attachment" src="../images/big/img1.jpg"> </a>
				</div>
				<div class="col-md-2">
					<a href="#"> <img class="img-thumbnail img-responsive" alt="attachment" src="../images/big/img2.jpg"> </a>
				</div>
				<div class="col-md-2">
					<a href="#"> <img class="img-thumbnail img-responsive" alt="attachment" src="../images/big/img3.jpg"> </a>
				</div>
			</div>
		</div>*@
</div>

@section Scripts
	{
	<script>
		$(document).ready(function () {
			const notificator = new Notificator();
			notificator.markAsRead("@ViewBag.NotificationId");
		});
	</script>
}
